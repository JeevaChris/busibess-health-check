<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BizVitals 360 - Business Health Assessment</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(to right, #f0f4f8, #d9e4f5);
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #2b8a3e;
      color: white;
      padding: 20px 40px;
      text-align: center;
      font-size: 1.5rem;
    }
    .container {
      max-width: 1000px;
      margin: 40px auto;
      background: #fff;
      padding: 40px;
      border-radius: 12px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.08);
    }
    h1 {
      text-align: center;
      color: #2b8a3e;
      margin-bottom: 40px;
    }
    .category-block {
      margin-bottom: 40px;
    }
    .category-block h2 {
      color: #2b8a3e;
      font-size: 1.4rem;
      margin-bottom: 20px;
      border-bottom: 2px solid #e0e0e0;
      padding-bottom: 5px;
    }
    .question-block {
      margin-bottom: 20px;
    }
    .question-block h3 {
      margin-bottom: 10px;
      color: #444;
      font-size: 1rem;
    }
    label {
      margin-right: 20px;
      font-size: 0.95rem;
    }
    button {
      background: #2b8a3e;
      color: white;
      padding: 14px 28px;
      border: none;
      border-radius: 8px;
      font-size: 1.1rem;
      cursor: pointer;
      display: block;
      margin: 40px auto 0;
      transition: background 0.3s ease;
    }
    button:hover {
      background: #256d34;
    }
    footer {
      text-align: center;
      font-size: 0.9rem;
      padding: 20px;
      color: #999;
    }
  </style>
</head>
<body>
  <header>
    BizVitals 360 - Business Health Assessment
  </header>
  <div class="container">
    <h1>Assess Your Business Performance</h1>
    <form id="healthForm"></form>
  </div>
  <footer>
    &copy; 2025 BizVitals360. All rights reserved.
  </footer>

  <script>
    const groupedQuestions = {
      "Revenue & Profitability": [
        "Are you getting more sales or customers than you did last year?",
        "Are you less dependent on a single customer or product to keep your business running?",
        "Have your profit margins improved or stayed stable in the past 12 months?",
        "Could your business stay profitable if revenue dropped by 10%?",
        "Do you track revenue trends by product, service, or region?",
        "Is your pricing strategy aligned with customer value and market position?",
        "Are you regularly reviewing financial reports to assess profit trends?"
      ],
      "Cash Flow & Liquidity": [
        "Can you handle your regular business expenses without borrowing or delays?",
        "Do you have some money saved to manage slow months or emergencies?",
        "Do you know how much money is coming in and going out every month?",
        "Do you consistently generate more cash than you spend each month?",
        "Can you access funds quickly in case of a cash crunch?",
        "Do you forecast your cash flow at least monthly?",
        "Have you separated personal and business finances completely?",
        "Do you avoid frequent reliance on credit for regular expenses?"
      ],
      "Cost & Expense Management": [
        "Are most of your costs helping your business grow or run better?",
        "Could you reduce spending quickly if needed, without hurting your business?",
        "Do you track your spending against a monthly or quarterly budget?",
        "Do you routinely review and optimize supplier and vendor contracts?",
        "Have you identified your top 3 cost drivers in the business?",
        "Do you run a break-even analysis when planning large expenses?",
        "Do you review expense reports or accounts monthly?"
      ],
      "Working Capital & Efficiency": [
        "Do your customers usually pay you on time?",
        "Can you pay your suppliers and bills on time without waiting for new income?",
        "Could your business keep running for a few months if sales dropped suddenly?",
        "Are most of your invoices paid within 30 days?",
        "Do you keep enough inventory to meet demand without overstocking?",
        "Do you review how quickly you convert inventory into sales?",
        "Are your payable and receivable cycles optimized to avoid cash gaps?",
        "Do you monitor short-term assets and liabilities monthly?"
      ]
    };

    const answerOptions = ["Yes", "In Process", "No", "N/A"];
    const form = document.getElementById("healthForm");
    let questionIndex = 0;

    for (const category in groupedQuestions) {
      const catBlock = document.createElement("div");
      catBlock.className = "category-block";
      const catTitle = document.createElement("h2");
      catTitle.textContent = category;
      catBlock.appendChild(catTitle);

      groupedQuestions[category].forEach(question => {
        const div = document.createElement("div");
        div.className = "question-block";
        div.innerHTML = `
          <h3>${question}</h3>
          ${answerOptions.map(opt => `
            <label><input type="radio" name="q${questionIndex}" value="${opt}" required> ${opt}</label>
          `).join("")}
        `;
        catBlock.appendChild(div);
        questionIndex++;
      });

      form.appendChild(catBlock);
    }

    const submitButton = document.createElement("button");
    submitButton.type = "submit";
    submitButton.textContent = "Submit";
    submitButton.style.marginTop = "30px";
    form.appendChild(submitButton);

    const answerWeights = { "Yes": 1, "In Process": 0.5, "No": 0, "N/A": 0 };

    form.addEventListener("submit", function(e) {
      e.preventDefault();

      const formData = new FormData(this);
      const categoryScores = {};
      const categoryTotals = {};

      let qIndex = 0;
      for (const category in groupedQuestions) {
        groupedQuestions[category].forEach(() => {
          const answer = formData.get(`q${qIndex}`);
          const weight = 1;
          const score = answerWeights[answer] * weight;

          if (!categoryScores[category]) {
            categoryScores[category] = 0;
            categoryTotals[category] = 0;
          }

          categoryScores[category] += score;
          categoryTotals[category] += weight;
          qIndex++;
        });
      }

      localStorage.setItem("categoryScores", JSON.stringify(categoryScores));
      localStorage.setItem("categoryTotals", JSON.stringify(categoryTotals));
      window.location.href = "result.html";
    });
  </script>
</body>
</html>
